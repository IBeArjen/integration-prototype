version: "3.3"

services:

  vis_ingest1:
    image: sip
    entrypoint: python3 -m
    command: sip.emulators.csp_visibility_sender -v /home/sdp/sip/etc/vis_sender_config.json
    networks:
      - outside
    deploy:
      mode: global
      placement:
        constraints:
          - node.ID == knx1y5d44hz81uorwcf8xs84v
      labels:
        com.dn.description: "Host networking"

  vis_ingest2:
    image: sip
    entrypoint: python3 -m
    command: sip.emulators.csp_visibility_sender -v /home/sdp/sip/etc/vis_sender_config1.json
    networks:
      - outside
    deploy:
      mode: global
      placement:
        constraints:
          - node.ID == l0xbcmxk5dd29ps03y5z0voo0
      labels:
        com.dn.description: "Host networking"

  vis_ingest3:
    image: sip
    entrypoint: python3 -m
    command: sip.emulators.csp_visibility_sender -v /home/sdp/sip/etc/vis_sender_config2.json
    networks:
      - outside
    deploy:
      mode: global
      placement:
        constraints:
          - node.ID == r1q9ww0isac1oroqm3fu6c8yw
      labels:
        com.dn.description: "Host networking"

networks:
  outside:
    external:
      name: "host"

